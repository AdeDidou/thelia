{extends file="admin-layout.tpl"}

{block name="page-title"}{intl l='Edit profile'}{/block}

{block name="check-permissions"}admin.profile.edit{/block}

{block name="main-content"}
    <div class="profile edit-profile">

        <div id="wrapper" class="container">

                <ul class="breadcrumb">
        			<li><a href="{url path='/admin/home'}">{intl l="Home"}</a></li>
                    <li>{intl l='Editing profile "%name"' name="{$NAME}"}</li>
                </ul>

        		<div class="row">
        			<div class="col-md-12 general-block-decorator">

    					<div class="col-md-12 title title-without-tabs">
    					   {intl l="Edit profile $NAME"}
    					</div>

                        <div class="form-container">
                            {form name="thelia.admin.profile.modification"}
                                <form method="POST" action="{url path="/admin/profile/update/{$ID}"}" {form_enctype form=$form} class="clearfix">

                                    {form_hidden_fields form=$form}

                                    {form_field form=$form field='success_url'}
                                        <input type="hidden" name="{$name}" value="{url path="/admin/profile/update/{$ID}"}" />
                                    {/form_field}

                                    {if $form_error}<div class="alert alert-danger">{$form_error_message}</div>{/if}

                                    {form_field form=$form field='firstname'}
                                        <div class="form-group {if $error}has-error{/if}">
                                            <label for="{$label_attr.for}" class="control-label">{intl l="{$label}"} : </label>
                                            <input type="text" id="{$label_attr.for}" name="{$name}" class="form-control" value="{$FIRSTNAME}" title="{intl l="{$label}"}" placeholder="{intl l='Firstname'}">
                                        </div>
                                    {/form_field}

                                    {form_field form=$form field='lastname'}
                                        <div class="form-group {if $error}has-error{/if}">
                                            <label for="{$label_attr.for}" class="control-label">{intl l="{$label}"} : </label>
                                            <input type="text" id="{$label_attr.for}" name="{$name}" class="form-control" value="{$LASTNAME}" title="{intl l="{$label}"}" placeholder="{intl l='Lastname'}">
                                        </div>
                                    {/form_field}

                                    {form_field form=$form field='default_language'}
                                        <div class="form-group {if $error}has-error{/if}">
                                            <label for="{$label_attr.for}" class="control-label">{intl l="{$label}"} : </label>

                                            <select name="{$name}" id="{$label_attr.for}" data-toggle="selectpicker">
                                                {loop type="lang" name="default_language" backend_context="1"}
                                                    <option value="{$ID}" {if $ID == $TITLE}selected{/if}>{$TITLE}</option>
                                                {/loop}
                                            </select>
                                        </div>
                                    {/form_field}
                                    
                                    {form_field form=$form field='editing_language_default'}
                                        <div class="form-group {if $error}has-error{/if}">
                                            <label for="{$label_attr.for}" class="control-label">{intl l="{$label}"} : </label>

                                            <select name="{$name}" id="{$label_attr.for}"  data-toggle="selectpicker">
                                                {loop type="lang" name="editing_language_default" backend_context="1"}
                                                    <option value="{$ID}" {if $ID == $TITLE}selected{/if}>{$TITLE}</option>
                                                {/loop}
                                            </select>
                                        </div>
                                    {/form_field}
                                    
                                    <div class="well">
                                        <div class="title title-without-tabs">{intl l="Change password"}</div>

                                        {form_field form=$form field='old_password'}
                                            <div class="form-group {if $error}has-error{/if}">
                                                <label for="{$label_attr.for}" class="control-label">{intl l="{$label}"} : </label>
                                                <input type="text" id="{$label_attr.for}" name="{$name}" class="form-control" title="{intl l="{$label}"}" placeholder="{intl l='Old password'}">
                                            </div>
                                        {/form_field}

                                        {form_field form=$form field='password'}
                                            <div class="form-group {if $error}has-error{/if}">
                                                <label for="{$label_attr.for}" class="control-label">{intl l="{$label}"} : </label>
                                                <input type="text" id="{$label_attr.for}" name="{$name}" class="form-control" title="{intl l="{$label}"}" placeholder="{intl l='Password'}">
                                            </div>
                                        {/form_field}

                                        {form_field form=$form field='password_confirm'}
                                            <div class="form-group {if $error}has-error{/if}">
                                                <label for="{$label_attr.for}" class="control-label">{intl l="{$label}"} : </label>
                                                <input type="text" id="{$label_attr.for}" name="{$name}" class="form-control" title="{intl l="{$label}"}" placeholder="{intl l='Password confirmation'}">
                                            </div>
                                        {/form_field}
                                    </div>
                                    
                                    <div class="text-right">
                                        <button type="submit" class="btn btn-default btn-primary" title="{intl l='Edit profile'}">
                                            {intl l="Edit"}
                                            <span class="glyphicon glyphicon-ok"></span>
                                        </button>
                                    </div>
                                </form>
                            {/form}
    					</div>
        				
        			</div>

        		</div>    		

        </div>
    </div>
{/block}

{block name="javascript-initialization"}

    {javascripts file='assets/js/bootstrap-select/bootstrap-select.js'}
        <script src="{$asset_url}"></script>
    {/javascripts}
    {javascripts file='assets/js/main.js'}
        <script src="{$asset_url}"></script>
    {/javascripts}

{/block}
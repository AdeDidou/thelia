
{* Adding a new Category *}

<div class="modal hide fade" id="add_category_dialog" tabindex="-1" role="dialog" aria-hidden="true">

    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h3>{intl l="Create a new category"}</h3>
    </div>

    {form name="thelia.admin.category.creation"}
    <form method="POST" action="{url path='/admin/catalog/category'}" {form_enctype form=$form}>

        {* the action processed by the controller *}
	    <input type="hidden" name="action" value="create" />

        {form_hidden_fields form=$form}

        {form_field form=$form field='parent'}
        <input type="hidden" name="{$name}" value="{$current_category_id}" />
        {/form_field}

        {form_field form=$form field='success_url'}
        {* on success, redirect to category change page. _ID_ is replaced with the ID of the created category (see Thelia\Action\Category.php)  *}
        <input type="hidden" name="{$name}" value="{url path='admin/catalog/category' id="_ID_" action='edit'}" />
        {/form_field}

	    <div class="modal-body">

            {if #form_error}<div class="alert alert-block alert-error" id="add_category_dialog_error">#form_error_message</div>{/if}

	        <div class="control-group">
	            <label class="control-label">
	               {intl l='Category Title *'}
	            </label>

	            <div class="controls">
                    {loop type="lang" name="default-lang" default_only="1"}
                        {form_field form=$form field='locale'}
                        <input type="hidden" name="{$name}" value="{$LOCALE}" />
                        {/form_field}

	                    <div class="input-append input-block-level">
	                        {form_field form=$form field='title'}
	                        <span {if $error}class="error"{/if}>
	                           <input type="text" required="required" name="{$name}" value="{$value}" title="{intl l='Category title'}" placeholder="{intl l='Category title'}" class="input-block-level">
	                        </span>
	                        {/form_field}
	                        <span class="add-on"><img src="{image file="../assets/img/flags/{$CODE}.gif"}" alt="{intl l=$TITLE}" /></span>
	                    </div>

		                <div class="help-block">{intl l="Enter here the category title in the default language ($TITLE)"}</div>
	                {/loop}
	            </div>

	        </div>
	    </div>

	    <div class="modal-footer">
	        <button type="button" class="btn" data-dismiss="modal" aria-hidden="true">{intl l="Cancel"}</button>
	        <button type="submit" class="btn btn-primary">{intl l="Create this category"}</button>
	    </div>

    </form>
    {/form}
</div>

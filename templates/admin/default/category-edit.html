{extends file="admin-layout.tpl"}

{block name="check-permissions"}admin.catalog.view{/block}

{block name="page-title"}{intl l='Edit category'}{/block}

{block name="main-content"}
<div class="catalog edit-category">
	<div id="wrapper" class="container">

        {include file="includes/catalog-breadcrumb.html"}

        <div class="row">
            {loop name="category_edit" type="category" visible="*" id="{$category_id}" backend_context="1" lang="$edit_language_id"}
            <div class="col-md-12 general-block-decorator">
                <div class="row">
                    <div class="col-md-7 title">
						{intl l='Edit category'}
		            </div>

	                <div class="col-md-5 actions">
		                <button class="btn btn-default" title="{intl l='Edit previous category'}"><i class="glyphicon glyphicon-arrow-left"></i></button>
		                <button class="btn btn-default" title="{intl l='Preview category page'}"><i class="glyphicon glyphicon-eye-open"></i></button>
		                <button class="btn btn-default" title="{intl l='Edit next category'}"><i class="glyphicon glyphicon-arrow-right"></i></button>
	                </div>
                </div>

	            <div class="row">
	                <div class="col-md-12">

						<ul class="nav nav-tabs">
		                    <li class="active"><a href="#general_description" data-toggle="tab">{intl l="General description"}</a></li>

		                    <li><a href="#details" data-toggle="tab">{intl l="Details"}</a></li>
		                    <li><a href="#images" data-toggle="tab">{intl l="Images"}</a></li>
		                    <li><a href="#documents" data-toggle="tab">{intl l="Documents"}</a></li>
		                    <li><a href="#modules" data-toggle="tab">{intl l="Modules"}</a></li>
		 				</ul>

		                <div class="tab-content">

		                    <div class="tab-pane fade active in" id="general_description">

			                    <div class="form-container">

				                    {form name="thelia.admin.category.modification"}
				                    <form method="POST" action="{url path='/admin/categories/save'}" {form_enctype form=$form} class="clearfix">

	                                    {include file="includes/inner-form-toolbar.html" close_url="{url path='/admin/categories' category_id=$category_id}"}

			                            {* Be sure to get the category ID, even if the form could not be validated *}
			                            <input type="hidden" name="category_id" value="{$category_id}" />

			                            {form_hidden_fields form=$form}

			                            {form_field form=$form field='success_url'}
			                                <input type="hidden" name="{$name}" value="{url path='/admin/category' category_id={$category_d}}" />
			                            {/form_field}

			                            {form_field form=$form field='locale'}
			                                <input type="hidden" name="{$name}" value="{$edit_language_locale}" />
			                            {/form_field}

			                            {if $form_error}<div class="alert alert-danger">{$form_error_message}</div>{/if}

	                                    {include file="includes/standard-description-form-fields.html"}

                                        {form_field form=$form field='url'}
                                            <div class="form-group {if $error}has-error{/if}">
                                                <label for="{$label_attr.for}" class="control-label">
                                                    {intl l="{$label}"} :
                                                </label>

                                                <input type="text" id="{$label_attr.for}" required="required" name="{$name}" value="{$value}" title="{intl l='Rewritten URL'}" placeholder="{intl l='Rewriten URL'}" class="form-control">
                                             </div>
                                        {/form_field}

						                <div class="row">
						                    <div class="col-md-6">
		                                        {form_field form=$form field='parent'}
		                                            <div class="form-group {if $error}has-error{/if}">

		                                                <label for="{$label_attr.for}" class="control-label">
		                                                    {intl l="{$label}"} :
		                                                </label>

		                                                <select id="{$label_attr.for}" required="required" name="{$name}" class="form-control">
		                                                      <option value="0">{intl l="Top level"}</option>

                                                              {$myparent=$PARENT}
		                                                      {loop name="cat-parent" type="category-tree" visible="*" category="0"}
		                                                           <option value="{$ID}" style="padding-left: {3 + $LEVEL * 20}px" {if $myparent == $ID}selected="selected"{/if} {if $category_id == $ID}disabled="disabled"{/if}>{$TITLE}</option>
		                                                      {/loop}

		                                                </select>
		                                             </div>
		                                        {/form_field}
						                    </div>

                                            <div class="col-md-6">
									            {form_field form=$form field='visible'}
									                <div class="form-group {if $error}has-error{/if}">
									                    <label for="{$label_attr.for}" class="control-label">{intl l='Visibility'}</label>
									                    <div class="checkbox">
									                        <label>
									                            <input type="checkbox" id="{$label_attr.for}" name="{$name}" value="1" {if $value != 0}checked="checked"{/if}>
									                            {$label}
									                        </label>
									                    </div>
									                </div>
									            {/form_field}
                                            </div>
						                </div>

                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="control-group">
                                                    <lablel>&nbsp;</lablel>
                                                    <div class="controls">
                                                        <p>{intl l='Category created on %date_create. Last modification: %date_change' date_create="{format_date date=$CREATE_DATE}" date_change="{format_date date=$UPDATE_DATE}"}</p>
                                                    </div>
                                                 </div>
                                            </div>
                                        </div>

            	                    </form>
				                    {/form}
			                    </div>
		                    </div>

		                    <div class="tab-pane fade" id="details">
		                    klljkmk
		                    </div>

		                    <div class="tab-pane fade" id="images">
		                    </div>

		                    <div class="tab-pane fade" id="documents">
		                    </div>

		                    <div class="tab-pane fade" id="modules">
		                    </div>
		                 </div>
                    </div>
                </div>
		    </div>
            {/loop}
 		</div>
	</div>
</div>
{/block}

{block name="javascript-initialization"}
<script>

$(function() {

    $('.use_default_rewriten_url').click(function(ev) {
    	alert("Not functionnal");

    	ev.preventDefault();
    });
})

</script>
{/block}
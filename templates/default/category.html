<div style="border: solid 8px; margin: 0px; padding: 0px; width: 30%; float: left">

<h2>CATALOG</h2>

{loop name="category0" type="category" parent="0" order="manual"}
<div style="border: solid 4px blue; padding: 20px; margin: 10px;">
    <h2>CATEGORY : #TITLE (#LOOP_COUNT / #LOOP_TOTAL)</h2>
    {loop name="product" type="product" category="#ID"}
    <div style="border: dashed 2px red; padding: 20px; margin: 10px;">
        <h3><a name="#REF">PRODUCT : #REF (#LOOP_COUNT / #LOOP_TOTAL)</a></h3>
        <h4>#TITLE</h4>
        <p>#DESCRIPTION</p>
        {ifloop rel="acc"}
            <h5>Accessories</h5>
            <ul>
                {loop name="acc" type="accessory" product="#ID" order="accessory"}
                <li><a href="##REF">#REF</a></li>
                {/loop}
            </ul>
        {/ifloop}
        {elseloop rel="acc"}
            <h5>No accessory</h5>
        {/elseloop}
        {ifloop rel="ft"}
            <h5>Features</h5>
            <ul>
                {loop name="ft" type="feature" order="manual" product="#ID"}
                <li>#TITLE</li>
                {/loop}
            </ul>
        {/ifloop}
        {elseloop rel="ft"}
            <h5>No feature</h5>
        {/elseloop}
    </div>
    {/loop}
    {loop name="catgory1" type="category" parent="#ID"}
    <div style="border: double 4px lightseagreen; padding: 20px; margin: 10px;">
        <h3>SUBCATEGORY : #TITLE  (#LOOP_COUNT / #LOOP_TOTAL)</h3>
        {loop name="product" type="product" category="#ID"}
        <div style="border: solid 1px green; padding: 20px; margin: 10px;">
            <h3><a name="#REF">PRODUCT : #REF (#LOOP_COUNT / #LOOP_TOTAL)</a></h3>
            <h4>#TITLE</h4>
            <p>#DESCRIPTION</p>
            {ifloop rel="acc"}
            <h5>Accessories</h5>
            <ul>
                {loop name="acc" type="accessory" product="#ID" order="accessory"}
                <li><a href="##REF">#REF</a></li>
                {/loop}
            </ul>
            {/ifloop}
            {elseloop rel="acc"}
            <h5>No accessory</h5>
            {/elseloop}
            {ifloop rel="ft"}
            <h5>Features</h5>
            <ul>
                {loop name="ft" type="feature" order="manual" product="#ID"}
                <li>#TITLE</li>
                {/loop}
            </ul>
            {/ifloop}
            {elseloop rel="ft"}
            <h5>No feature</h5>
            {/elseloop}
        </div>
        {/loop}
    </div>
    {/loop}
</div>
{/loop}

</div>

<div style="border: solid 8px; margin: 0px; padding: 0px; width: 30%; float: left">

<h2>ALL FEATURES AND THEIR AVAILABILITY</h2>

<ul>
    {loop name="ft" type="feature" order="manual"}
    <li>
        #TITLE
        <ul>
            {loop name="ftav" type="feature_available" order="manual" feature="#ID"}
                <li>#TITLE</li>
            {/loop}
        </ul>
    </li>
    {/loop}
</ul>

</div>

<div style="border: solid 8px; margin: 0px; padding: 0px; width: 30%; float: left">
    {*loop name="product" type="product" order="promo,min_price" exclude_category="3"}
    <h3>PRODUCT : #REF / #TITLE</h3>
    price : #PRICE €<br />
    promo price : #PROMO_PRICE €<br />
    is promo : #PROMO<br />
    is new : #NEW<br />
    weight : #WEIGHT<br />
    {/loop*}

    {*loop name="product" type="product" order="ref" feature_available="1: (1 | 2) , 2: 4, 3: 433"}
    <h3>PRODUCT : #REF / #TITLE</h3>
    price : #PRICE €<br />
    promo price : #PROMO_PRICE €<br />
    is promo : #PROMO<br />
    is new : #NEW<br />
    weight : #WEIGHT<br />
    {/loop*}

    {*loop name="product" type="product" order="ref" feature_values="1: foo"}
    <h3>PRODUCT : #REF / #TITLE</h3>
    price : #PRICE €<br />
    promo price : #PROMO_PRICE €<br />
    is promo : #PROMO<br />
    is new : #NEW<br />
    weight : #WEIGHT<br />
    {/loop*}
</div>